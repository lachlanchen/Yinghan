[English](../README.md) ยท [ุงูุนุฑุจูุฉ](README.ar.md) ยท [Espaรฑol](README.es.md) ยท [Franรงais](README.fr.md) ยท [ๆฅๆฌ่ช](README.ja.md) ยท [ํ๊ตญ์ด](README.ko.md) ยท [Tiแบฟng Viแปt](README.vi.md) ยท [ไธญๆ (็ฎไฝ)](README.zh-Hans.md) ยท [ไธญๆ๏ผ็น้ซ๏ผ](README.zh-Hant.md) ยท [Deutsch](README.de.md) ยท [ะัััะบะธะน](README.ru.md)


# ุชุฌุฒุฆุฉ ุงูุนุถูุงุช (ููุจ + ุณุทุฑ ุงูุฃูุงูุฑ)

![Python](https://img.shields.io/badge/Python-3.x-blue.svg)
![Framework](https://img.shields.io/badge/Backend-Tornado-009688.svg)
![AI](https://img.shields.io/badge/OpenAI-Vision%20Segmentation-412991.svg)
![Status](https://img.shields.io/badge/README-First%20Complete%20Draft-success.svg)
![Interface](https://img.shields.io/badge/UI-Web%20%2B%20CLI-0ea5e9)
![Outputs](https://img.shields.io/badge/Artifacts-Overlay%20%7C%20Mask%20%7C%20JSON-f97316)
![PWA](https://img.shields.io/badge/PWA-Minimal%20Support-22c55e)

ุชุทุจูู Python ูุชุฌุฒุฆุฉ ุงูุนุถูุงุช ูู ุตูุฑ ุงููุฌูุฑ ุจุงุณุชุฎุฏุงู ููุงุฐุฌ OpenAI ุงููุงุฏุฑุฉ ุนูู ุงูุฑุคูุฉ.

ูุชุถูู ูุฐุง ุงููุณุชูุฏุน:
- ุฎุงุฏู ููุจ Tornado ูุน ูุงุฌูุฉ ุฑูุน.
- ุณูุฑ ุนูู CLI ููุงุณุชุฎุฏุงู ุงูุฏูุนู ุฃู ุงููุจุฑูุฌ.
- ุงุณุชุฎุฑุงุฌ ุงููุถูุนุ ูุชูููุฏ ุงูููุงุนุ ูุนุฑุถ ุตูุฑุฉ ูุฑููุฉ ุจุงูุชูุถูุญุงุช.
- ุฏุนู PWA ุจุณูุท (ููู manifest + ุชุฎุฒูู service worker ููุฃุตูู ุงูุซุงุจุชุฉ ุงูุฃุณุงุณูุฉ).

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุณุชูุจู ุงูุชุทุจูู ุตูุฑุฉ ูุฌูุฑูุฉ ููุฏุฎูุ ููุฑุณููุง ุฅูู ูููุฐุฌ OpenAI ูุน ููุฌู ุจูุฎุทุท JSON ุตุงุฑูุ ุซู ูุนูุฏ ูุถูุนูุง ูุงุญุฏูุง ูุชุชุจุน ุญุฏูุฏ ุงูุนุถููุฉ.

### ๐ ููุญุฉ ุณุฑูุนุฉ

| ุงููุฌุงู | ุงูุชูุงุตูู |
|---|---|
| ุงููุฏุฎู | ุตูุฑุฉ ูุฌูุฑูุฉ |
| ุงููุฎุฑุฌ ุงูุฃุณุงุณู | ูุถูุน ุงูุนุถููุฉ (`x, y` ููุงุท) |
| ุงููููุงุช ุงููุดุชูุฉ | PNG ูุฑูู ุจุงูุชูุถูุญุ PNG ููุงุน ุซูุงุฆูุ JSON ูููุถูุน |
| ุฃูุถุงุน ุงููุตูู | ูุงุฌูุฉ ููุจุ CLIุ ุงุณุชุฏุนุงุก API ูุจุงุดุฑ |
| ุงููุงุฌูุฉ ุงูุฎูููุฉ | Tornado (`server.py`) |
| ูุณุงุฑ ุงูุฐูุงุก ุงูุงุตุทูุงุนู | OpenAI Responses API ุฃูููุงุ ูุน Chat Completions ููุณุงุฑ ุงุญุชูุงุทู |

ุงููุฎุฑุฌุงุช ุงููููููุฏุฉ:
- `*_annotated.png`: ุงูุตูุฑุฉ ุงูุฃุตููุฉ ูุน ุชุฑุงูุจ ุฃุญูุฑ ุดุจู ุดูุงู.
- `*_mask.png`: ููุงุน ุซูุงุฆู ููุนุถููุฉ.
- `*_polygon.json`: ูุฎุฑุฌุงุช ููุธููุฉ (`width`, `height`, `polygon`, `confidence`).

ูููุงุช ุงูุชุดุบูู ุงูุฃุณุงุณูุฉ:
- `server.py`: ุชุทุจูู ุงูููุจ + ูุณุงุฑุงุช API.
- `organoid_segmenter.py`: ููุทู ุงูุชุฌุฒุฆุฉ ููุฎุฑุฌุงุช ุงูุตูุฑุฉ/ุงูููุงุน.
- `segment_organoid.py`: ุบูุงู CLI.

## โจ ุงูููุฒุงุช

- ูุงุฌูุฉ ููุจ ุนูู `http://localhost:8888` ูุชุฌุฒุฆุฉ ุชูุงุนููุฉ ุณุฑูุนุฉ.
- ููุทุฉ ููุงูุฉ ุจุฃุณููุจ REST ููู `POST /api/segment` ูุน ุฏุนู ุฑูุน multipart.
- ุงุณู ูููุฐุฌ ูุงุจู ููุถุจุท ูู ุงููุงุฌูุฉ ููู CLI (ุงูุงูุชุฑุงุถู `gpt-4o-2024-08-06`).
- ุงูุชุญูู ูู ููุงุท ุงููุถูุน ูุชูููุฏูุง ุถูู ุญุฏูุฏ ุงูุตูุฑุฉ.
- ุฅูุดุงุก ุชููุงุฆู ููุฌูุฏุงุช ุงููุฎุฑุฌุงุช (`uploads/`, `outputs/`).
- ุงุณุชุฎุฏุงู OpenAI Responses API ุฃูููุงุ ูุน Chat Completions ููุณุงุฑ ุงุญุชูุงุทู ูู ุงูุดููุฑุฉ.
- ุฏุนู service worker ูุชุฎุฒูู ุงููููุงุช ุงูุซุงุจุชุฉ ุงูุฃุณุงุณูุฉ ูุคูุชูุง.

## ๐๏ธ ุจููุฉ ุงููุดุฑูุน

```text
Yinghan/
โโ organoid_segmenter.py          # ููุทู ุงูุชุฌุฒุฆุฉ ุงูุฃุณุงุณู ูุนุฑุถ ุงููุฎุฑุฌุงุช
โโ segment_organoid.py            # ููุทุฉ ุฏุฎูู CLI
โโ server.py                      # ุฎุงุฏู Tornado + API
โโ requirements.txt               # ุงุนุชูุงุฏูุงุช Python
โโ templates/
โ  โโ index.html                  # ูููู ูุงุฌูุฉ ุงูููุจ
โโ static/
โ  โโ app.js                      # ููุทู ุงููุงุฌูุฉ ูุฑูุน ุงููููุงุช ูุนุฑุถ ุงููุชุงุฆุฌ
โ  โโ styles.css                  # ุฃููุงุท ุงููุงุฌูุฉ
โ  โโ manifest.json               # ููู PWA manifest
โ  โโ sw.js                       # ููุทู ุชุฎุฒูู service worker
โโ i18n/                          # ูููุงุช README ุงููุชุฑุฌูุฉ (ูุฎุทุท ููุง/ูููููุฏุฉ ุนุจุฑ ุฎุท ุงูุฃูุงุจูุจ)
โโ uploads/                       # ุชุฎุฒูู ุงูุฑูุน ููุช ุงูุชุดุบูู (ูุณุชุซูู ูู git)
โโ outputs/                       # ูุฎุฑุฌุงุช ุงูุชุฌุฒุฆุฉ ููุช ุงูุชุดุบูู (ูุณุชุซูู ูู gitุ ููููุดุฃ ููุช ุงูุชุดุบูู)
โโ .auto-readme-work/             # ุณูุงู/ูุฎุฑุฌุงุช ุฎุท ุฃูุงุจูุจ ุชูููุฏ README
```

## โ ุงููุชุทูุจุงุช ุงููุณุจูุฉ

- Python 3.10+ (ูุทููุจ 3.xุ ููููุตู ุจู 3.11).
- ููุชุงุญ OpenAI API ูุน ุตูุงุญูุฉ ุงููุตูู ุฅูู ูููุฐุฌ ูุงุฏุฑ ุนูู ุงูุฑุคูุฉ.
- ูุตูู ุดุจูู ูู ุจูุฆุฉ ุงูุชุดุบูู ุฅูู OpenAI APIs.

## โ๏ธ ุงูุชุซุจูุช

```bash
git clone <your-repo-url>
cd Yinghan

python -m venv .venv
source .venv/bin/activate  # Windows: .venv\\Scripts\\activate

pip install -r requirements.txt
```

ุนููู ููุชุงุญ API ุงูุฎุงุต ุจู:

```bash
export OPENAI_API_KEY="your_api_key_here"  # Windows PowerShell: $env:OPENAI_API_KEY="your_api_key_here"
```

## ๐ ุงูุงุณุชุฎุฏุงู

### ๐ ุชุดุบูู ุชุทุจูู ุงูููุจ

```bash
python server.py
```

ุงูุชุญ:

```text
http://localhost:8888
```

ุชุฏูู ุงูุนูู ุนูู ุงูููุจ:
1. ุงุฎุชุฑ ุตูุฑุฉ.
2. ุบููุฑ ุงููููุฐุฌ ุงุฎุชูุงุฑููุง ูู ุญูู ุงูุฅุฏุฎุงู.
3. ุงููุฑ **Segment**.
4. ุฑุงุฌุน ุงูุชุฑุงูุจุ ูุงูุตูุฑุฉ ุงููุฑููุฉ ุจุงูุชูุถูุญุ ูุงูููุงุน.

### ๐งช ุชุดุบูู CLI

```bash
python segment_organoid.py /path/to/image.jpg
```

ูุณุงุฆุท ุงุฎุชูุงุฑูุฉ:

```bash
python segment_organoid.py /path/to/image.jpg --out-dir outputs --model gpt-4o-2024-08-06
```

ูุนุฑุถ CLI ูุณุงุฑุงุช ุงููุฎุฑุฌุงุช ูููุฎุตูุง ูุชุถูู ุฃุจุนุงุฏ ุงูุตูุฑุฉ ูุนุฏุฏ ููุงุท ุงููุถูุน.

### ๐ ุงุณุชุฏุนุงุก API ูุจุงุดุฑุฉ

```bash
curl -X POST http://localhost:8888/api/segment \
  -F "image=@/path/to/image.jpg" \
  -F "model=gpt-4o-2024-08-06"
```

ุดูู ุงูุงุณุชุฌุงุจุฉ ุงููุซุงู:

```json
{
  "width": 1024,
  "height": 1024,
  "polygon": [[100.0, 120.0], [110.0, 125.0]],
  "confidence": 0.92,
  "annotated_url": "/outputs/example_annotated.png",
  "mask_url": "/outputs/example_mask.png",
  "json_url": "/outputs/example_polygon.json",
  "upload_url": "/uploads/upload.jpg"
}
```

## ๐๏ธ ุงูุฅุนุฏุงุฏุงุช

ุงููุนุงููุงุช ุงููุงุจูุฉ ููุถุจุท ุญุงูููุง ูู ุงูุดููุฑุฉ:

- `model`:
  - ุงูุงูุชุฑุงุถู: `gpt-4o-2024-08-06`
  - ูุงุจู ููุชุนููู ุนุจุฑ ุญูู ูููุฐุฌ ุงูููุจ ุฃู CLI ุจุงุณุชุฎุฏุงู `--model`
- `out_dir`:
  - ุฎูุงุฑ CLI ูู `--out-dir` (ุงูุงูุชุฑุงุถู `outputs`)
  - ุงูุฎุงุฏู ูุณุชุฎุฏู `outputs/` ุฏุงุฎูููุง

ูุชุบูุฑุงุช ุงูุจูุฆุฉ:
- `OPENAI_API_KEY` (ูุทููุจ).

ุงูุชุฑุงุถุงุช:
- ุนููู `OpenAI()` ูุณุชุฎุฏู ุจูุงูุงุช ุงุนุชูุงุฏ ูุนุชูุฏุฉ ุนูู ุงูุจูุฆุฉ.
- ูุง ุญุงุฌุฉ ุฅูู base URL ูุฎุตุต ุฃู ุฅุนุฏุงุฏุงุช org/project ูุฎุตุตุฉ ูุง ูู ูุชุทูุจ ุฅุนุฏุงุฏ ุญุณุงุจ OpenAI ูุฏูู ุฐูู.

## ๐งพ ุฃูุซูุฉ

### ๐ ุงุณุชุฎุฏุงู Python ุจุฑูุฌููุง

```python
from organoid_segmenter import segment_organoid

result = segment_organoid(
    image_path="sample.jpg",
    out_dir="outputs",
    model="gpt-4o-2024-08-06",
)

print(result.annotated_path)
print(result.mask_path)
print(result.json_path)
print(result.confidence)
```

### ๐ ูุญุต JSON ุงูุฎุงุต ุจุงููุถูุน

```bash
cat outputs/<name>_polygon.json
```

### ๐งฑ ูููุงุช ุงููุฎุฑุฌุงุช ุงููุนุชุงุฏุฉ

```text
outputs/
โโ <base>_<timestamp>_annotated.png
โโ <base>_<timestamp>_mask.png
โโ <base>_<timestamp>_polygon.json
```

## ๐ง ููุงุญุธุงุช ุงูุชุทููุฑ

- ุฅุทุงุฑ ุงููุงุฌูุฉ ุงูุฎูููุฉ: Tornado (`server.py`).
- ููุฏุณ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ: HTML/CSS/JS ุซุงุจุช (`templates/index.html`, `static/app.js`).
- ูุชู ุชุณุฌูู service worker ุนูุฏ ุชุญููู ุงูุตูุญุฉ ููุฎุฒู ุงูุฃุตูู ุงูุฃุณุงุณูุฉ ุงููุฐููุฑุฉ ูู `static/sw.js`.
- ูุชุญูู ูู ุตุญุฉ ุงููุถูุน ูุถูุงู 3 ููุงุท ุนูู ุงูุฃูู ูุชูููุฏ ุงูุฅุญุฏุงุซูุงุช ุถูู ุญุฏูุฏ ุงูุตูุฑุฉ.
- ุชูููุฏ ุงููุฎุฑุฌุงุช ูุณุชุฎุฏู Pillow (`PIL.Image`, `ImageDraw`).

ูุตุงุฆุญ ููุชุทููุฑ ุงููุญูู:

```bash
# Run server
python server.py

# Run CLI against an existing image
python segment_organoid.py 6f1e1874eacffe1dbae0393f48811e74.jpg
```

## ๐ฉบ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง

- `openai.AuthenticationError` ุฃู ูุง ุดุงุจู:
  - ุชุญูู ูู ุชุนููู `OPENAI_API_KEY` ูู ุงูุตุฏูุฉ ุงูุชู ุชุดุบู Python.
- `Model response did not contain valid JSON`:
  - ุฌุฑูุจ ูููุฐุฌูุง ุขุฎุฑ ุฃู ุฃุนุฏ ุงูุชุดุบููุ ุชูุฌุฏ ุขููุฉ ุชุญููู ุงุญุชูุงุทูุฉ ููู ุงููุฎุฑุฌุงุช ุงููุดููุฉ ูุฏ ุชูุดู.
- `Polygon must contain at least 3 points`:
  - ุฃุนุงุฏ ุงููููุฐุฌ ูุถูุนูุง ุบูุฑ ุตุงูุญุ ุฃุนุฏ ุงููุญุงููุฉ ุจุตูุฑุฉ ุฃูุถุญ.
- ุงููุงุฌูุฉ ุชูุญููู ููู ุงูุชุฌุฒุฆุฉ ุชูุดู:
  - ุฑุงุฌุน ุณุฌูุงุช ุงูุฎุงุฏู ููุนุฑูุฉ ููุน ุงูุงุณุชุซูุงุก ุงููุนุงุฏ ูู `/api/segment`.
- `ModuleNotFoundError`:
  - ุฃุนุฏ ุชุซุจูุช ุงูุงุนุชูุงุฏูุงุช ุจุงุณุชุฎุฏุงู `pip install -r requirements.txt` ุถูู ุงูุจูุฆุฉ ุงููุดุทุฉ.

## ๐ฃ๏ธ ุฎุงุฑุทุฉ ุงูุทุฑูู

ุงูุฎุทูุงุช ุงูุชุงููุฉ ุงููุญุชููุฉ ููุฐุง ุงููุณุชูุฏุน:

1. ุฅุถุงูุฉ ุงุฎุชุจุงุฑุงุช ุขููุฉ ููุชุญูู ูู ุตุญุฉ ุงููุถูุน ูุชูููุฏ ุงููุฎุฑุฌุงุช.
2. ุฅุถุงูุฉ CI (ูุญุต lintุ ููุญูุตุงุช ุงูุฃููุงุนุ ูุงุฎุชุจุงุฑุงุช smoke).
3. ุฅุถุงูุฉ CLI ุจููุท ุฏูุนู ููุนุงูุฌุฉ ุงููุฌูุฏุงุช.
4. ุฏุนู ุฃููุนุฉ ูุงุฆูุงุช ูุชุนุฏุฏุฉ ุฃู ูุฎุฑุฌุงุช ุชุฌุฒุฆุฉ ุนูู ูุณุชูู ุงููุณุฎ.
5. ุฅุถุงูุฉ Dockerfile ููุซุงุฆู ุงููุดุฑ.
6. ุฅุถุงูุฉ ุฃูุซูุฉ ููุงุณ ุงูุฃุฏุงุก ููุฌููุนุงุช ุจูุงูุงุช ุชุฌุฑูุจูุฉ ูุน ูุฎุฑุฌุงุช ูุชููุนุฉ.
7. ุฅููุงู ูููุงุช README ูุชุนุฏุฏุฉ ุงููุบุงุช ุชุญุช `i18n/`.

## ๐ค ุงููุณุงููุฉ

ุงููุณุงููุงุช ูุฑุญุจ ุจูุง.

ุณูุฑ ุงูุนูู ุงูููุตู ุจู:

1. ุฃูุดุฆ Fork ูููุณุชูุฏุน ูุฃูุดุฆ ูุฑุน ููุฒุฉ.
2. ุฃุฌุฑู ุชุบููุฑุงุช ูุฑูุฒุฉ ูุน ุฑุณุงุฆู commit ูุงุถุญุฉ.
3. ุชุญููู ูู ุชุฏููุงุช ุงูููุจ + CLI ูุฏูููุง ูุญูููุง.
4. ุงูุชุญ ุทูุจ ุณุญุจ ูุตู ุชุบููุฑุงุช ุงูุณููู ูุฃุฏูุฉ ุงูุงุฎุชุจุงุฑ.

ูุฌุงูุงุช ูุณุงููุฉ ููุชุฑุญุฉ:
- ุชุตููู ููุฌูุงุช ุฃูุถู ูุงุณุชุฎุฑุงุฌ ูุถูุน ุฃูุซุฑ ุงุณุชูุฑุงุฑูุง.
- ุชุญุณูู ุนุฑุถ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (ุชูุจูุฑ/ุชุญุฑููุ ุชูุนูู ุงูุญุฏูุฏ).
- ุชุฌููุฒุงุช ุงุฎุชุจุงุฑ ูุนููุงุช ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุฅูุชุงุฌ.
- ุชุญุณููุงุช ุงูุชูุซูู ูุงูุชุนุฑูุจ.

## ๐ ุงูุชุฑุฎูุต

ูุง ููุฌุฏ ุญุงูููุง ููู ุชุฑุฎูุต ูู ูุฐุง ุงููุณุชูุฏุน.

ุงูุงูุชุฑุงุถ: ุฌููุน ุงูุญููู ูุญููุธุฉ ุงูุชุฑุงุถููุง ุฅูู ุฃู ุชุชู ุฅุถุงูุฉ ุชุฑุฎูุต ุจุดูู ุตุฑูุญ.

ุฅุฐุง ููุช ุชุฎุทุท ููุดุงุฑูุฉ ูุฐุง ุงููุดุฑูุน ุฃู ุชูุฒูุนูุ ุฃุถู ููู `LICENSE` ูุญุฏูุซ ูุฐุง ุงููุณู.
